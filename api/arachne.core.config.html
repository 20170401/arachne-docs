<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>arachne.core.config documentation</title><link rel="stylesheet" type="text/css" href="../api-override.css" /><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Arachne API Documentation</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 "><a href="arachne.assets.html"><div class="inner"><span>arachne.assets</span></div></a></li><li class="depth-1 "><a href="arachne.assets.config.html"><div class="inner"><span>arachne.assets.config</span></div></a></li><li class="depth-1 "><a href="arachne.assets.dsl.html"><div class="inner"><span>arachne.assets.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.assets.pipeline.html"><div class="inner"><span>arachne.assets.pipeline</span></div></a></li><li class="depth-1 "><a href="arachne.assets.schema.html"><div class="inner"><span>arachne.assets.schema</span></div></a></li><li class="depth-1 "><a href="arachne.assets.specs.html"><div class="inner"><span>arachne.assets.specs</span></div></a></li><li class="depth-1 "><a href="arachne.assets.util.html"><div class="inner"><span>arachne.assets.util</span></div></a></li><li class="depth-1 "><a href="arachne.build.html"><div class="inner"><span>arachne.build</span></div></a></li><li class="depth-1 "><a href="arachne.core.html"><div class="inner"><span>arachne.core</span></div></a></li><li class="depth-1 current"><a href="arachne.core.config.html"><div class="inner"><span>arachne.core.config</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.common.html"><div class="inner"><span>arachne.core.config.impl.common</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.datascript.html"><div class="inner"><span>arachne.core.config.impl.datascript</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.datomic.html"><div class="inner"><span>arachne.core.config.impl.datomic</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.multiplex.html"><div class="inner"><span>arachne.core.config.impl.multiplex</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.model.html"><div class="inner"><span>arachne.core.config.model</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.model.specs.html"><div class="inner"><span>arachne.core.config.model.specs</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.script.html"><div class="inner"><span>arachne.core.config.script</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.specs.html"><div class="inner"><span>arachne.core.config.specs</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.validation.html"><div class="inner"><span>arachne.core.config.validation</span></div></a></li><li class="depth-1 "><a href="arachne.core.dsl.html"><div class="inner"><span>arachne.core.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.core.module.html"><div class="inner"><span>arachne.core.module</span></div></a></li><li class="depth-1 "><a href="arachne.core.runtime.html"><div class="inner"><span>arachne.core.runtime</span></div></a></li><li class="depth-1 "><a href="arachne.core.runtime.specs.html"><div class="inner"><span>arachne.core.runtime.specs</span></div></a></li><li class="depth-1 "><a href="arachne.core.schema.html"><div class="inner"><span>arachne.core.schema</span></div></a></li><li class="depth-1 "><a href="arachne.core.util.html"><div class="inner"><span>arachne.core.util</span></div></a></li><li class="depth-1 "><a href="arachne.core.util.specs.html"><div class="inner"><span>arachne.core.util.specs</span></div></a></li><li class="depth-1 "><a href="arachne.core.validators.html"><div class="inner"><span>arachne.core.validators</span></div></a></li><li class="depth-1 "><a href="arachne.error.html"><div class="inner"><span>arachne.error</span></div></a></li><li class="depth-1 "><a href="arachne.error.format.html"><div class="inner"><span>arachne.error.format</span></div></a></li><li class="depth-1 "><a href="arachne.http.html"><div class="inner"><span>arachne.http</span></div></a></li><li class="depth-1 "><a href="arachne.http.config.html"><div class="inner"><span>arachne.http.config</span></div></a></li><li class="depth-1 "><a href="arachne.http.dsl.html"><div class="inner"><span>arachne.http.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.http.dsl.test.html"><div class="inner"><span>arachne.http.dsl.test</span></div></a></li><li class="depth-1 "><a href="arachne.http.schema.html"><div class="inner"><span>arachne.http.schema</span></div></a></li><li class="depth-1 "><a href="arachne.http.validators.html"><div class="inner"><span>arachne.http.validators</span></div></a></li><li class="depth-1 "><a href="arachne.log.html"><div class="inner"><span>arachne.log</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.html"><div class="inner"><span>arachne.pedestal</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.config.html"><div class="inner"><span>arachne.pedestal.config</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.dsl.html"><div class="inner"><span>arachne.pedestal.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.routes.html"><div class="inner"><span>arachne.pedestal.routes</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.schema.html"><div class="inner"><span>arachne.pedestal.schema</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.server.html"><div class="inner"><span>arachne.pedestal.server</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.specs.html"><div class="inner"><span>arachne.pedestal.specs</span></div></a></li><li class="depth-1 "><a href="arachne.run.html"><div class="inner"><span>arachne.run</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="arachne.core.config.html#var-*default-partition*"><div class="inner"><span>*default-partition*</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-*dsl-function*"><div class="inner"><span>*dsl-function*</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-*provenance-txdata*"><div class="inner"><span>*provenance-txdata*</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-attr"><div class="inner"><span>attr</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-Configuration"><div class="inner"><span>Configuration</span></div></a></li><li class="depth-2 branch"><a href="arachne.core.config.html#var-init-"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>init-</span></div></a></li><li class="depth-2 branch"><a href="arachne.core.config.html#var-pull-"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pull-</span></div></a></li><li class="depth-2 branch"><a href="arachne.core.config.html#var-query-"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query-</span></div></a></li><li class="depth-2 branch"><a href="arachne.core.config.html#var-resolve-tempid-"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resolve-tempid-</span></div></a></li><li class="depth-2"><a href="arachne.core.config.html#var-update-"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>update-</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-dependencies"><div class="inner"><span>dependencies</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-dependency-rules"><div class="inner"><span>dependency-rules</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-init"><div class="inner"><span>init</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-pull"><div class="inner"><span>pull</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-q"><div class="inner"><span>q</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-resolve-tempid"><div class="inner"><span>resolve-tempid</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-stack-provenance-txdata"><div class="inner"><span>stack-provenance-txdata</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-tempid"><div class="inner"><span>tempid</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-tempid-literal"><div class="inner"><span>tempid-literal</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="arachne.core.config.html#var-with-provenance"><div class="inner"><span>with-provenance</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">arachne.core.config</h1><div class="doc"><pre class="plaintext">Handles building and managing Arachne's central Config object
</pre></div><div class="public anchor" id="var-*default-partition*"><h3>*default-partition*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-*dsl-function*"><h3>*dsl-function*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">The full qualified name of the current DSL function. Useful for error reporting in many contexts. Usually set by `with-provenance`.
</pre></div></div><div class="public anchor" id="var-*provenance-txdata*"><h3>*provenance-txdata*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Txdata regarding the provenance of config updates ocurring in this stack context
</pre></div></div><div class="public anchor" id="var-attr"><h3>attr</h3><div class="usage"><code>(attr cfg id &amp; attrs)</code></div><div class="doc"><pre class="plaintext">Convenience function to pull and return one or more nested attributes in one
step</pre></div></div><div class="public anchor" id="var-Configuration"><h3>Configuration</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">An abstraction over a configuration, with schema, queryable via Datalog
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-init-"><h3>init-</h3><div class="usage"><code>(init- config schema-txes)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-pull-"><h3>pull-</h3><div class="usage"><code>(pull- config expr id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-query-"><h3>query-</h3><div class="usage"><code>(query- config find-expr other-sources)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-resolve-tempid-"><h3>resolve-tempid-</h3><div class="usage"><code>(resolve-tempid- config arachne-tempid)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-update-"><h3>update-</h3><div class="usage"><code>(update- config txdata)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div></div><div class="public anchor" id="var-dependencies"><h3>dependencies</h3><div class="usage"><code>(dependencies cfg component-eid)</code></div><div class="doc"><pre class="plaintext">Given the entity ID of a component, return all of its direct or transitive dependencies.
</pre></div></div><div class="public anchor" id="var-dependency-rules"><h3>dependency-rules</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Datalog rule to recursively determine the dependency relationship between components
</pre></div></div><div class="public anchor" id="var-init"><h3>init</h3><div class="usage"><code>(init blank-cfg schema-txes)</code></div><div class="doc"><pre class="plaintext">Given a fresh blank config and a seq of txdatas containing Datomic-style schema, return a new
empty configuration with schema installed.</pre></div></div><div class="public anchor" id="var-pull"><h3>pull</h3><div class="usage"><code>(pull config expr id)</code></div><div class="doc"><pre class="plaintext">Given a Datomic-style pull expression and an identity (either a lookup ref
or an entity ID, return the resulting data structure.</pre></div></div><div class="public anchor" id="var-q"><h3>q</h3><div class="usage"><code>(q config find-expr &amp; other-sources)</code></div><div class="doc"><pre class="plaintext">Given a Datomic-style query expression and any number of additional data
sources, query the configuration.</pre></div></div><div class="public anchor" id="var-resolve-tempid"><h3>resolve-tempid</h3><div class="usage"><code>(resolve-tempid config arachne-tempid)</code></div><div class="doc"><pre class="plaintext">Given a configuration and an Arachne tempid, return concrete entity ID to
which the Arachne tempid was matched, in the most recent update to the
config.</pre></div></div><div class="public anchor" id="var-stack-provenance-txdata"><h3>stack-provenance-txdata</h3><div class="usage"><code>(stack-provenance-txdata source function)</code><code>(stack-provenance-txdata source function stack-filter-pred)</code></div><div class="doc"><pre class="plaintext">Build provenance txdata based on the current stack frame, using the provided
source and function symbol.

If a stack-filter-pred is provided, the system will use the top stack frame
that passes the predicate, otherwise current stack frame is used.

 The returned txdata includes:

- arachne.transaction/source
- arachne.transaction/function
- arachne.transaction/source-file
- arachne.transaction/source-line</pre></div></div><div class="public anchor" id="var-tempid"><h3>tempid</h3><div class="usage"><code>(tempid)</code><code>(tempid partition-or-id)</code><code>(tempid partition id)</code></div><div class="doc"><pre class="plaintext">Return a tempid representation which is agnostic to the actual underlying
Datalog implementation.</pre></div></div><div class="public anchor" id="var-tempid-literal"><h3>tempid-literal</h3><div class="usage"><code>(tempid-literal form)</code></div><div class="doc"><pre class="plaintext">Build a tempid representation from a reader literal of the form
`arachne/tempid []` or `arachne/tempid [-1]`</pre></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update config txdata)</code><code>(update config txdata add-provenance-txdata?)</code></div><div class="doc"><pre class="plaintext">Return an updated configuration, given Datomic-style txdata. Differences
 from Datomic include:

- Temporary IDs must be instances of arachne.core.config/Tempid instead of
  the format used by the underlying implementation
- Temporary IDs are not necessary on most entity maps (a novel temp id will
  be supplied when one is missing)
- Transactor functions are not supported</pre></div></div><div class="public anchor" id="var-with-provenance"><h3>with-provenance</h3><h4 class="type">macro</h4><div class="usage"><code>(with-provenance &amp; opts-and-body)</code></div><div class="doc"><pre class="plaintext">Add provenance txdata based upon the current stack location to the binding of
the *provenance-txdata* var inside the body.</pre></div></div></div></body></html>