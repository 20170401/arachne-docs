<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>arachne.http.dsl documentation</title><link rel="stylesheet" type="text/css" href="../api-override.css" /><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Arachne API Documentation</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 "><a href="arachne.assets.dsl.html"><div class="inner"><span>arachne.assets.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.build.html"><div class="inner"><span>arachne.build</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.datascript.html"><div class="inner"><span>arachne.core.config.impl.datascript</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.impl.datomic.html"><div class="inner"><span>arachne.core.config.impl.datomic</span></div></a></li><li class="depth-1 "><a href="arachne.core.config.model.html"><div class="inner"><span>arachne.core.config.model</span></div></a></li><li class="depth-1 "><a href="arachne.core.dsl.html"><div class="inner"><span>arachne.core.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.core.runtime.html"><div class="inner"><span>arachne.core.runtime</span></div></a></li><li class="depth-1 "><a href="arachne.error.html"><div class="inner"><span>arachne.error</span></div></a></li><li class="depth-1 "><a href="arachne.http.html"><div class="inner"><span>arachne.http</span></div></a></li><li class="depth-1 "><a href="arachne.http.config.html"><div class="inner"><span>arachne.http.config</span></div></a></li><li class="depth-1 current"><a href="arachne.http.dsl.html"><div class="inner"><span>arachne.http.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.http.dsl.test.html"><div class="inner"><span>arachne.http.dsl.test</span></div></a></li><li class="depth-1 "><a href="arachne.log.html"><div class="inner"><span>arachne.log</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.html"><div class="inner"><span>arachne.pedestal</span></div></a></li><li class="depth-1 "><a href="arachne.pedestal.dsl.html"><div class="inner"><span>arachne.pedestal.dsl</span></div></a></li><li class="depth-1 "><a href="arachne.run.html"><div class="inner"><span>arachne.run</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="arachne.http.dsl.html#var-*context-path*"><div class="inner"><span>*context-path*</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-*context-server*"><div class="inner"><span>*context-server*</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-endpoint"><div class="inner"><span>endpoint</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-ensure-path"><div class="inner"><span>ensure-path</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-handler"><div class="inner"><span>handler</span></div></a></li><li class="depth-1"><a href="arachne.http.dsl.html#var-with-context"><div class="inner"><span>with-context</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">arachne.http.dsl</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-*context-path*"><h3>*context-path*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">The path bound in the current context.
</pre></div></div><div class="public anchor" id="var-*context-server*"><h3>*context-server*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">The eid of the HTTP server currently in context
</pre></div></div><div class="public anchor" id="var-context"><h3>context</h3><h4 class="type">macro</h4><div class="usage"><code>(context path &amp; body)</code></div><div class="doc"><pre class="plaintext">Creates a context which scopes endpoint definitions (and possibly other types
of definitions) to the specified path. For example,

  (context "foo/bar"
    (endpoint :get "baz" :some/handler))

is the same as:

  (endpoint :get "foo/bar/baz" :some/handler).

Concretely, this macro evaluates the body with *context-path* bound to the
given path.</pre></div></div><div class="public anchor" id="var-endpoint"><h3>endpoint</h3><div class="usage"><code>(endpoint methods path component &amp; opts)</code></div><div class="doc"><pre class="plaintext">Define the given component to be a HTTP endpoint and attaches it to the routing tree. The
 component instance should be of a type that can be used as an endpoint with whatever server
 you're using (such as a Pedestal interceptor, an Arachne Handler component or a Ring handler
 function).

 Arguments are:

 - Method(s) (mandatory): either a keyword or set of keywords indicating the HTTP methods
   that this endpoint supports.
 - Path (mandatory): The URL path to which the endpoint is attached.
 - Component (mandatory): A reference to the actual endpoint component. A component reference can
   be an Arachne ID of a component declared elsewhere in the config, or an eid (such as is
   returned by DSL forms, allowing endpoints to be defined inline.)
 - Options (optional): A map (or kwargs) of additional options.

Supported options are:

 - :name - the name of the endpoint. If none is provided, one will later be inferred from the
   Arachne ID or handler function of the component.

 Returns the entity ID of the endpoint component</pre></div></div><div class="public anchor" id="var-ensure-path"><h3>ensure-path</h3><div class="usage"><code>(ensure-path path)</code></div><div class="doc"><pre class="plaintext">Given a path (as a string), ensure that all of the corresponding routing
segments exist in the context configuration, creating them if they are not
already present. Returns the entity ID of the final segment in the given
path.</pre></div></div><div class="public anchor" id="var-handler"><h3>handler</h3><div class="usage"><code>(handler &lt;arachne-id&gt; handler &lt;dependencies&gt;)</code></div><div class="doc"><pre class="plaintext">Defines a HTTP request handler component that uses a simple Ring-style
request handler function.

Arguments are:

- Arachne ID (optional): An Arachne ID for the handler component
- Handler function (mandatory): A symbol naming the handler function
- Dependency map (optional): A component dependency map of {&lt;key&gt; &lt;component-reference&gt;}.
  A component reference may be an Arachne ID or entity ID.

Dependencies will be assoc'd with the specified key to the Ring request map before it is
passed to the supplied handler function.</pre></div></div><div class="public anchor" id="var-with-context"><h3>with-context</h3><div class="usage"><code>(with-context path)</code></div><div class="doc"><pre class="plaintext">Given a path, return a path including any existing context path
</pre></div></div></div></body></html>